# Discord Analytics - 開発ルール

## 🎯 プロジェクト概要
Discord サーバーの成長戦略を立てるための、メンバー動向・アクティビティ分析ダッシュボード

### 対象サーバー
- サーバー数: 1つ
- 現在メンバー: 約300人 → 目標: 3,000人以上
- 運営チーム: 3名 → 将来: 10名

---

## 📋 開発ルール（重要）

### 1. 実装前の確認
- **ユーザーが「OK」と言うまで実装は進めない**
- 不明点があれば必ず質問する
- このrulesファイルを作業前に必ず参照する

### 2. タスク管理
- チェックリストで進捗を可視化
- 完了したタスクは必ずマークする

### 3. コーディング規約
- 日本語コメントを推奨
- TypeScript strict mode 必須
- ESLint + Prettier でコード品質維持

---

## 🛠️ 技術スタック

| カテゴリ | 技術 |
|---------|------|
| フロントエンド | Next.js 15 (App Router), TypeScript, Tailwind CSS |
| UI | shadcn/ui, Recharts |
| バックエンド | Next.js API Routes, Prisma |
| Discord Bot | discord.js 14 |
| データベース | PostgreSQL 15 |
| インフラ | Google Cloud (Cloud Run, Cloud SQL) |
| 認証 | NextAuth.js (Discord OAuth) |

---

## 📦 フェーズ状況

### Phase 1: MVP ✅ 完了
1. ✅ プロジェクト初期セットアップ
2. ✅ Prisma + PostgreSQL セットアップ
3. ✅ Discord Bot 実装（データ収集）
4. ✅ NextAuth.js 認証機能
5. ✅ ダッシュボード画面
6. ✅ メンバー分析画面
7. ✅ アクティビティ分析画面
8. ✅ デプロイ設定（Docker, Cloud Run）

### Phase 2: 拡張機能（予定）
- ⬜ タスク管理・共有
- ⬜ 業務連絡機能

---

## 📁 ディレクトリ構成

```
/
├── .cursor/rules       # 開発ルール
├── docs/
│   ├── requirements.md # 要件定義書
│   └── technical-spec.md # 技術要件書
├── bot/                # Discord Bot
│   ├── src/index.ts
│   ├── package.json
│   └── Dockerfile
├── prisma/
│   └── schema.prisma   # DBスキーマ
├── src/
│   ├── app/            # Next.js App Router
│   │   ├── api/        # API Routes
│   │   ├── dashboard/  # ダッシュボード画面
│   │   └── login/      # ログイン画面
│   ├── auth/           # NextAuth 設定
│   ├── components/     # UIコンポーネント
│   └── lib/            # ユーティリティ
├── Dockerfile          # Web アプリ用
├── docker-compose.yml  # ローカル開発環境
└── cloudbuild.yaml     # Cloud Build 設定
```

---

## 🔗 リポジトリ情報
- GitHub: https://github.com/ochotres0803/discord-management
- ブランチ戦略: main → develop → feature/*

---

## 📚 参照ドキュメント
- 要件定義書: `docs/requirements.md`
- 技術要件書: `docs/technical-spec.md`
- README: `README.md`

---

## 🚀 開発コマンド

```bash
# ローカル開発
docker-compose up -d          # DB起動
npx prisma generate           # Prismaクライアント生成
npx prisma db push            # DBスキーマ適用
npm run dev                   # Webアプリ起動

# Discord Bot
cd bot && npm install && npm run dev

# ビルド
npm run build

# デプロイ（Cloud Build）
gcloud builds submit
```

---

**最終更新日**: 2026-01-24
